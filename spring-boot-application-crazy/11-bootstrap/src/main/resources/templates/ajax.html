<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title>Crazyit</title>
    <link rel="stylesheet" type="text/css" th:href="@{/css/bootstrap.min.css}"/>
    <script th:src="@{/js/jquery-3.3.1.min.js}"></script>
    <script th:src="@{/js/bootstrap.min.js}"></script>
</head>
<body>
<div style="width: 500px; margin-left: 30px;">
    <form name="bookForm" th:action="@{/ajaxSave}" method="post" th:object="${book}">
        <div id="alertDiv" class="alert alert-warning alert-dismissible fade" role="alert">
            <strong>错误：</strong> <span th:text="${msg}"></span>
            <a href="#" class="close" id="closeButton">x</a>
        </div>
        <table style="width: 100%;">
            <tr>
                <td>书名：</td>
                <td><input type="text" class="form-control" name="name" th:value="*{name}"/></td>
            </tr>
            <tr>
                <td>作者：</td>
                <td><input type="text" class="form-control" name="author" th:value="*{author}"/></td>
            </tr>
            <tr>
                <td>售价：</td>
                <td class="input-group">
                    <div class="input-group-prepend">
                        <span class="input-group-text">¥</span>
                    </div>
                    <input type="text" class="form-control" name="price" th:value="*{price}">
                    <div class="input-group-append">
                        <span class="input-group-text">元</span>
                    </div>
                </td>
            </tr>
            <tr>
                <td>&nbsp;</td>
                <td><input type="submit" class="btn btn-outline-primary" value="提交"/></td>
            </tr>
        </table>
    </form>
</div>

<script>
    $(function () {
        var msg = '[[${msg}]]';
        if (msg == "") {
            // 无提示信息，隐藏提示div
            $("#alertDiv").addClass("hide");
        } else {
            // 有提示信息，显示div
            $("#alertDiv").addClass("show");
        }

        // 错误提示关闭a的点击方法
        $('#closeButton').click(function () {
            $(".alert").addClass("hide");
            $(".alert").removeClass("show");
        });
    });
</script>
</body>
</html>